<!DOCTYPE html>
<html>
	<head>
		<title>Flux</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
		<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	</head>
	<body>
		<div data-role="page" id="main">
			<div data-role="header" class="jqm-header">
				<h1>Settings</h1>
			</div>
			<div data-role="content">
				<div data-role="collapsible-set" data-mini="false">
					<div data-role="collapsible">
						<h3>Display</h3>
						<fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
							<legend>Date Format</legend>
							<input name="date" id="date-0" data-type="int" value="0" type="radio">
							<label for="date-0">Hidden</label>
							<input name="date" id="date-1" data-type="int" value="1" checked="checked" type="radio">
							<label for="date-1">MON 1 JAN</label>
							<input name="date" id="date-2" data-type="int" value="2" type="radio">
							<label for="date-2">MON JAN 1</label>
						</fieldset>
					</div>
				</div>
				<br />
				<div class="ui-body">
					<fieldset class="ui-grid-a">
						<div class="ui-block-a"><button type="submit" id="b-cancel">Cancel</button></div>
						<div class="ui-block-b"><button type="submit" id="b-submit">Save</button></div>
					</fieldset>
				</div>
			</div>
		</div>
		<script>
			$().ready(function() {
				if (typeof window.localStorage !== "undefined") {
					if (window.localStorage.starfield) {
						settings = JSON.parse(window.localStorage.starfield);
						$("input[name=date][id=date-" + settings["date"] + "]").prop('checked',true);
						$("input[name=date]").checkboxradio('refresh');
					}
				}
				function saveSettings() {
					var settings = {
						'date': Number($("input[name=date]:checked").val()),
					}
					return settings;
				}
				$("#b-cancel").click(function() {
					document.location = "pebblejs://close";
				});
				$("#b-submit").click(function() {
					settings = JSON.stringify(saveSettings());
					if (typeof window.localStorage !== "undefined") {
						window.localStorage.starfield = settings;
					}
					document.location.href = "pebblejs://close#" + encodeURIComponent(settings);
				});
			});
		</script>
	</body>
</html>
